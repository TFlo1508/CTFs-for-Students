<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WebAnwendungen 2 Frontend Demo</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script src="js/sessionHandling.js"></script>
        <script src="js/shopAndBasket.js"></script>
    </head>

    <body>

        <h1>Rudiment√§rer Shop</h1>

        <p>
            <a href="shoppingBasket.html">Zum Warenkorb</a>
        </p>

		<table id="produktliste">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>ID</th>
                    <th>Kategorie</th>
                    <th>Name</th>
                    <th>Preis</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>

            </tbody>            
        </table>

        <p>
            <a href="shoppingBasket.html">Zum Warenkorb</a>
        </p>

        <p>
            <b>WICHTIG: Bitte lassen Sie sich auch die Browser-Konsole anzeigen</b>
        </p>
        
        <script>

        $(document).ready(function() {
            console.log('loading all products');
			
			$.ajax({
                url: 'http://localhost:8000/api/produkt/alle',
                method: 'get',
                contentType: 'application/json; charset=utf-8',
                cache: false,
				dataType: 'json'
            }).done(function (response) {
                console.log(response);
                renderProducts('#produktliste > tbody', response);
            }).fail(function (jqXHR, statusText, error) {
                console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
                alert('Ein Fehler ist aufgetreten');
            });
        });
        
        </script>
    </body>
</html>